<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clicker Combat</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}

body{
margin:0;
background:radial-gradient(circle at top,#0b1a2f,#04070e);
font-family:"Orbitron",sans-serif;
color:#e6f1ff;
overflow:hidden;
cursor:none;
}

/* TOP HUD */
#top{
display:flex;
justify-content:space-between;
align-items:center;
padding:10px 16px;
background:#071b2f;
box-shadow:0 0 20px #000;
font-size:18px;
}

.topItem{color:#35e3ff;font-weight:800}

/* LAYOUT */
#game{display:flex;height:100vh}
#left,#right{
width:320px;
background:#0d1626;
padding:14px;
overflow-y:auto;
}
#center{
flex:1;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
position:relative;
}

/* CHARACTER */
#character{
width:280px;
cursor:pointer;
transition:0.15s;
}
#character.hit{transform:scale(1.08) rotate(-2deg)}

/* BOSS BAR */
#bossBar{
width:360px;
height:18px;
background:#111;
border-radius:10px;
overflow:hidden;
margin-bottom:8px;
}
#bossHp{
height:100%;
background:linear-gradient(90deg,#ff3c3c,#ffb13c);
width:100%;
transition:width 0.1s;
}

/* FLOAT */
.float{
position:absolute;
font-size:26px;
font-weight:900;
pointer-events:none;
animation:float 0.8s forwards;
color:#35e3ff;
}
@keyframes float{
to{transform:translateY(-60px);opacity:0}
}

/* ITEMS */
.item{
display:flex;
gap:12px;
background:#091728;
margin-bottom:10px;
padding:10px;
border-left:6px solid;
}
.item img{width:64px;height:64px}
.item button{width:100%;cursor:pointer}

.common{border-color:#35e3ff}
.rare{border-color:gold}
.epic{border-color:purple}
.legendary{border-color:hotpink}

/* ACHIEVEMENTS */
.locked{color:#666}
.unlocked{color:lime}

/* CURSOR */
#cursor{
position:fixed;
width:40px;
pointer-events:none;
transform:translate(-50%,-50%);
}

/* POPUP */
#popup{
position:fixed;
bottom:30px;
left:50%;
transform:translateX(-50%);
background:#35e3ff;
color:#000;
padding:12px 22px;
border-radius:10px;
font-weight:900;
opacity:0;
transition:0.4s;
}
#popup.show{opacity:1}
</style>
</head>

<body>

<div id="top">
<div class="topItem">TOTAL: <span id="total">0</span></div>
<div class="topItem">DPC: <span id="dpc">1</span></div>
<div class="topItem">TITLE: <span id="title">None</span></div>
</div>

<div id="game">
<div id="left">
<h3>ACHIEVEMENTS</h3>
<div id="achievements"></div>
</div>

<div id="center">
<div id="bossBar"><div id="bossHp"></div></div>
<img id="character" src="YIcheng_4.png">
</div>

<div id="right">
<h3>SWORDS</h3>
<div id="swords"></div>
<h3>SKINS</h3>
<div id="skins"></div>
<button onclick="save()">SAVE</button>
</div>
</div>

<img id="cursor" src="Wood.webp">
<div id="popup"></div>

<script>
// DATA
const swords=[
{n:"Wood",d:1,c:0,r:"common",img:"Wood.webp"},
{n:"Iron",d:10,c:200,r:"rare",img:"Iron.webp"},
{n:"Gold",d:40,c:800,r:"epic",img:"Gold.png"},
{n:"Diamond",d:120,c:4000,r:"legendary",img:"Diamond.webp"}
];

const skins=[
{n:"Default",d:0,c:0,img:"YIcheng_4.png"},
{n:"Thinker",d:50,c:5000,img:"Yicheng_5.png"},
{n:"Ascended",d:200,c:20000,img:"Yicheng.png"}
];

const achievements=[
{n:"FIRST BLOOD",c:()=>total>=100},
{n:"DESTROYER",c:()=>bosses>=5},
{n:"OVERPOWERED",c:()=>dpc()>=500}
];

// STATE
let saveData=JSON.parse(localStorage.getItem("save"))||{};
let total=saveData.total||0;
let bosses=saveData.bosses||0;
let ownedS=saveData.os||["Wood"];
let ownedK=saveData.ok||["Default"];
let titles=saveData.t||[];

let sword=swords[0];
let skin=skins[0];

let boss={hp:500,max:500,reward:20};

// ELEMENTS
const totalEl=totalSpan=totalSpan=document.getElementById("total");
const dpcEl=document.getElementById("dpc");
const titleEl=document.getElementById("title");
const bossHpEl=document.getElementById("bossHp");
const char=document.getElementById("character");
const achEl=document.getElementById("achievements");

// HELPERS
function dpc(){return sword.d+skin.d+boss.reward}

function float(x,y,t){
let f=document.createElement("div");
f.className="float";
f.style.left=x+"px";
f.style.top=y+"px";
f.textContent=t;
document.body.appendChild(f);
setTimeout(()=>f.remove(),800);
}

function popup(t){
let p=document.getElementById("popup");
p.textContent="ðŸ† "+t;
p.classList.add("show");
setTimeout(()=>p.classList.remove("show"),2000);
}

// CLICK
char.onclick=e=>{
char.classList.remove("hit"); void char.offsetWidth;
char.classList.add("hit");

boss.hp-=dpc();
float(e.clientX,e.clientY,"-"+dpc());

if(boss.hp<=0){
total+=boss.reward;
bosses++;
boss.reward=Math.floor(boss.reward*1.4);
boss.max=Math.floor(boss.max*1.35);
boss.hp=boss.max;
}

update();
checkAchievements();
};

// BUILD
function build(){
document.getElementById("swords").innerHTML="";
swords.forEach(s=>{
document.getElementById("swords").innerHTML+=
`<div class="item ${s.r}">
<img src="${s.img}">
<div>${s.n}<br>DMG ${s.d}
<button onclick="buySword('${s.n}')">${ownedS.includes(s.n)?"Equip":"Buy "+s.c}</button>
</div></div>`;
});

document.getElementById("skins").innerHTML="";
skins.forEach(s=>{
document.getElementById("skins").innerHTML+=
`<div class="item common">
<img src="${s.img}">
<div>${s.n}<br>+${s.d}
<button onclick="buySkin('${s.n}')">${ownedK.includes(s.n)?"Equip":"Buy "+s.c}</button>
</div></div>`;
});
}

// BUY
function buySword(n){
let s=swords.find(x=>x.n===n);
if(ownedS.includes(n)){sword=s;update();return}
if(total>=s.c){total-=s.c;ownedS.push(n);sword=s;update()}
}
function buySkin(n){
let s=skins.find(x=>x.n===n);
if(ownedK.includes(n)){skin=s;char.src=s.img;update();return}
if(total>=s.c){total-=s.c;ownedK.push(n);skin=s;char.src=s.img;update()}
}

// ACHIEVEMENTS
function checkAchievements(){
achievements.forEach(a=>{
if(a.c()&&!titles.includes(a.n)){
titles.push(a.n);
titleEl.textContent=a.n;
popup(a.n);
}
});
}

// UPDATE
function update(){
totalEl.textContent=total;
dpcEl.textContent=dpc();
bossHpEl.style.width=(boss.hp/boss.max*100)+"%";
build();
}

// SAVE
function save(){
localStorage.setItem("save",JSON.stringify({
total,bosses,os:ownedS,ok:ownedK,t:titles
}));
alert("Saved!");
}

// CURSOR
const cursor=document.getElementById("cursor");
document.addEventListener("mousemove",e=>{
cursor.style.left=e.clientX+"px";
cursor.style.top=e.clientY+"px";
});

// INIT
build();update();
</script>

</body>
</html>
