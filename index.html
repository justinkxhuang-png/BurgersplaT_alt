<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clicker Combat</title>

<style>
:root {
  --bg: #070b14;
  --panel: #0d1626;
  --neon: #35e3ff;
  --text: #e6f1ff;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #0b1a2f, #04070e);
  color: var(--text);
  overflow: hidden;
  cursor: none;
}

/* TOP BAR */
#top {
  height: 70px;
  background: linear-gradient(90deg, #071b2f, #02060c);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  font-weight: 700;
  color: var(--neon);
  box-shadow: 0 0 25px #000;
}

/* LAYOUT */
#game {
  display: flex;
  height: calc(100vh - 70px);
}

/* LEFT */
#left {
  width: 260px;
  background: var(--panel);
  padding: 15px;
}

/* CENTER */
#center {
  flex: 1;
  position: relative;
  overflow: hidden;
}

/* RIGHT */
#right {
  width: 320px;
  background: var(--panel);
  padding: 10px;
}

/* TABS */
.tabs button {
  width: 33%;
  padding: 10px;
  background: #0f2238;
  border: none;
  color: var(--text);
  cursor: pointer;
}
.tabs button.active {
  background: var(--neon);
  color: #000;
  font-weight: bold;
}

/* CHARACTER */
#character {
  position: absolute;
  width: 140px;
  cursor: pointer;
  transition: transform 0.05s;
}
#character:active {
  transform: scale(0.95);
}

/* DAMAGE FLOAT */
.damage {
  position: absolute;
  color: #ff5;
  font-weight: bold;
  pointer-events: none;
  animation: float 0.8s ease-out forwards;
}
@keyframes float {
  to { transform: translateY(-40px); opacity: 0; }
}

/* SHOP ITEMS */
.item {
  background: #091728;
  margin-bottom: 8px;
  padding: 8px;
  border-left: 5px solid #555;
}
.item button {
  float: right;
}

/* CURSOR */
#cursor {
  position: fixed;
  pointer-events: none;
  font-size: 28px;
  transform: translate(-50%, -50%);
}
</style>
</head>

<body>

<div id="top">
  Total Damage: <span id="total">0</span> |
  Damage / Click: <span id="dpc">1</span> |
  Combo: <span id="combo">1x</span>
</div>

<div id="game">

  <div id="left">
    <p>Coins: <b id="coins">0</b></p>
    <p>Combo Timer</p>
    <progress id="comboBar" value="0" max="100"></progress>
  </div>

  <div id="center">
    <img id="character" src="Yicheng_5.png">
  </div>

  <div id="right">
    <div class="tabs">
      <button onclick="showTab('shop')" class="active">SHOP</button>
      <button onclick="showTab('stats')">STATS</button>
      <button onclick="saveGame()">SAVE</button>
    </div>

    <div id="shop"></div>
    <div id="stats" style="display:none"></div>
  </div>

</div>

<div id="cursor">üó°Ô∏è</div>

<script>
/* ---------------- DATA ---------------- */
const swords = [
 {name:"Wooden Sword", dmg:1, price:0, icon:"ü™µ", rarity:"COMMON"},
 {name:"Iron Sword", dmg:10, price:300, icon:"‚öîÔ∏è", rarity:"RARE"},
 {name:"Gold Sword", dmg:35, price:900, icon:"üü°", rarity:"EPIC"},
 {name:"Diamond Sword", dmg:70, price:4000, icon:"üíé", rarity:"MYTHIC"},
 {name:"Amethyst Sword", dmg:150, price:10000, icon:"üîÆ", rarity:"LEGENDARY"},
 {name:"Tungsten Sword", dmg:400, price:40000, icon:"üî©", rarity:"LEGENDARY"},
 {name:"Yicheng Sword", dmg:999, price:100000, icon:"‚ùì", rarity:"SECRET"}
];

const characters = [
 {name:"Forehead", cps:1, cost:0, img:"Yicheng_5.png", rarity:"COMMON"},
 {name:"Grade 3 Pianist", cps:5, cost:1000, img:"Yicheng_5.png", rarity:"RARE"},
 {name:"Entrepreneur", cps:25, cost:10000, img:"Yicheng_5.png", rarity:"EPIC"},
 {name:"The Thinker", cps:999, cost:50000, img:"Yicheng_5.png", rarity:"MYTHIC"},
 {name:"Ascended to Heaven", cps:1500, cost:150000, img:"Yicheng_5.png", rarity:"LEGENDARY"},
 {name:"???", cps:"???", cost:500000, img:"Ben.png", rarity:"SECRET"},
 {name:"???", cps:"???", cost:1000000, img:"Amare.png", rarity:"SECRET"}
];

/* ---------------- STATE ---------------- */
let coins = 0;
let totalDamage = 0;
let sword = swords[0];
let combo = 0;
let comboTimer = 0;

/* ---------------- UI ---------------- */
const char = document.getElementById("character");

char.onclick = e => {
  combo++;
  comboTimer = 100;
  let mult = 1 + combo/100;
  let dmg = Math.floor(sword.dmg * mult);
  coins += dmg;
  totalDamage += dmg;

  spawnDamage(e.clientX, e.clientY, dmg);
  moveCharacter();
  updateUI();
};

function moveCharacter() {
  char.style.left = Math.random() * 80 + "%";
  char.style.top = Math.random() * 70 + "%";
}

function spawnDamage(x,y,val) {
  let d = document.createElement("div");
  d.className = "damage";
  d.style.left = x+"px";
  d.style.top = y+"px";
  d.textContent = "+"+val;
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),800);
}

/* ---------------- LOOP ---------------- */
setInterval(()=>{
  comboTimer--;
  if(comboTimer<=0){ combo=0; }
  document.getElementById("comboBar").value = comboTimer;
  document.getElementById("combo").textContent = (1+combo/100).toFixed(2)+"x";
},50);

/* ---------------- SHOP ---------------- */
function buildShop(){
  let s = document.getElementById("shop");
  s.innerHTML="<h3>Swords</h3>";
  swords.forEach(sw=>{
    let d=document.createElement("div");
    d.className="item";
    d.innerHTML=`${sw.icon} ${sw.name} (${sw.dmg})<button>${sw.price}</button>`;
    d.onclick=()=>{
      if(coins>=sw.price){
        coins-=sw.price;
        sword=sw;
        document.getElementById("cursor").textContent=sw.icon;
        updateUI();
      }
    };
    s.appendChild(d);
  });
}

/* ---------------- SAVE ---------------- */
function saveGame(){
  localStorage.setItem("clickerSave",JSON.stringify({coins,totalDamage,sword:sword.name}));
  alert("Saved!");
}

function loadGame(){
  let s=JSON.parse(localStorage.getItem("clickerSave"));
  if(!s)return;
  coins=s.coins;
  totalDamage=s.totalDamage;
  sword=swords.find(x=>x.name===s.sword)||swords[0];
}

function updateUI(){
  document.getElementById("coins").textContent=coins;
  document.getElementById("total").textContent=totalDamage;
  document.getElementById("dpc").textContent=sword.dmg;
}

/* ---------------- CURSOR ---------------- */
document.addEventListener("mousemove",e=>{
  let c=document.getElementById("cursor");
  c.style.left=e.clientX+"px";
  c.style.top=e.clientY+"px";
});

/* INIT */
loadGame();
buildShop();
updateUI();
moveCharacter();
</script>

</body>
</html>

