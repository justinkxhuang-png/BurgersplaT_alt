<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Yicheng Clicker</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Press Start 2P', monospace;
  background: #0b0f1a;
  color: white;
  overflow: hidden;
}

:root {
  --common: #7fdcff;
  --rare: gold;
  --epic: purple;
  --mythic: red;
  --legendary: hotpink;
}

button {
  font-family: inherit;
  cursor: pointer;
}

.locked {
  opacity: 0.4;
  pointer-events: none;
}

.rainbow {
  background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet);
  -webkit-background-clip: text;
  color: transparent;
}

#topLeft {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 22px;
}

#comboLeft {
  position: absolute;
  left: 10px;
  top: 70px;
  font-size: 42px;
  color: cyan;
}

#statsTop {
  position: absolute;
  top: 10px;
  right: 10px;
  text-align: right;
  font-size: 24px;
}

#character {
  position: absolute;
  width: 180px;
  cursor: pointer;
  transition: 0.2s;
}

#comboPopup {
  position: absolute;
  font-size: 36px;
  pointer-events: none;
  color: yellow;
  animation: pop 0.6s ease-out forwards;
}

@keyframes pop {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(1.6); }
}

#tabs {
  position: absolute;
  bottom: 0;
  width: 100%;
  display: flex;
}

.tab {
  flex: 1;
  padding: 20px;
  text-align: center;
  background: #111;
  border: 2px solid #333;
}

.tab.active {
  background: #7fdcff;
  color: black;
}

.panel {
  position: absolute;
  bottom: 80px;
  left: 0;
  right: 0;
  height: 45%;
  background: #111;
  overflow-y: auto;
  display: none;
}

.panel.active {
  display: block;
}

.item {
  display: flex;
  align-items: center;
  border: 3px solid white;
  margin: 10px;
  padding: 10px;
}

.item img {
  width: 80px;
  height: 80px;
  margin-right: 20px;
}

.item button {
  margin-left: auto;
}
</style>
</head>

<body>

<div id="topLeft">TITLE: NONE</div>
<div id="comboLeft">COMBO: x1</div>

<div id="statsTop">
  <div id="totalDamage">TOTAL DMG: 0</div>
  <div id="dpc">DMG/CLICK: 1</div>
</div>

<img id="character" src="YIcheng_4.png">

<div id="swordPanel" class="panel active"></div>
<div id="skinPanel" class="panel"></div>
<div id="achPanel" class="panel"></div>

<div id="tabs">
  <div class="tab active" onclick="openTab('sword')">SWORD</div>
  <div class="tab" onclick="openTab('skin')">SKIN</div>
  <div class="tab" onclick="openTab('ach')">ACHIEVEMENTS</div>
</div>

<script>
/* ================= CORE STATE ================= */
let state = JSON.parse(localStorage.getItem("save")) || {
  totalDamage: 0,
  combo: 1,
  dmgClick: 1,
  sword: "Wooden",
  skin: "Default",
  unlockedSwords: ["Wooden"],
  unlockedSkins: ["Default"],
  achievements: [],
  title: "NONE"
};

let lastClick = 0;

/* ================= UI ================= */
const character = document.getElementById("character");

function updateUI() {
  document.getElementById("totalDamage").textContent = "TOTAL DMG: " + state.totalDamage;
  document.getElementById("dpc").textContent = "DMG/CLICK: " + state.dmgClick;
  document.getElementById("comboLeft").textContent = "COMBO: x" + state.combo;
  document.getElementById("topLeft").textContent = "TITLE: " + state.title;
  localStorage.setItem("save", JSON.stringify(state));
}

/* ================= CLICK ================= */
character.onclick = (e) => {
  const now = Date.now();
  state.combo = (now - lastClick < 800) ? state.combo + 1 : 1;
  lastClick = now;

  let dmg = Math.floor(state.dmgClick * (1 + state.combo * 0.01));
  state.totalDamage += dmg;

  popup(e.clientX, e.clientY, "x" + state.combo);
  moveCharacter();
  updateUI();
};

function popup(x,y,text){
  const p = document.createElement("div");
  p.id="comboPopup";
  p.textContent=text;
  p.style.left=x+"px";
  p.style.top=y+"px";
  document.body.appendChild(p);
  setTimeout(()=>p.remove(),600);
}

function moveCharacter(){
  character.style.left = Math.random()*(window.innerWidth-200)+"px";
  character.style.top = Math.random()*(window.innerHeight-300)+"px";
}

updateUI();
</script>

</body>
</html>

